<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">

<head>
	<meta charset="UTF-8">
	<title>Task Calendar</title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
		  integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

</head>
<body>

<!-- navigation bar (header) bootstrap v5.1 -->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
	<div class="container-fluid">
		<a class="navbar-brand" href="#">RESTART YOUR LOVE</a>
		<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText"
				aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarText">
			<ul class="navbar-nav me-auto mb-2 mb-lg-0">
				<li class="nav-item">
					<a class="nav-link active" aria-current="page" href="#" th:href="@{/tasklist}">Task Calendar</a>
				</li>
			</ul>
			<span class="navbar-text">
                    Welcome <span sec:authentication="principal.username"> User</span>!
                    <button type="button" class="btn btn-success btn-sm" sec:authorize="isAuthenticated()"><a style="text-decoration:none; color: white" th:href="@{/logout}">Log out</a></button>

            </span>
		</div>
	</div>
</nav>


<br>
<br>

<div class="container">
	<h1>Your tasks: </h1>
	<!--    <h3> TITLE BY INDEX 0 FROM DATABASE:</h3>-->
	<!--    <div th:text = "${taskTitle[0].getTitle()}"></div>-->

	<!--    <h3> LOOPED LIST OF TASK TITLES FROM DATABASE:</h3>-->
	<!--    <h4 th:each="taskTitle : ${taskTitle}" th:text="${taskTitle.getTitle()}"></h4>-->
	<br>

	<!--	Could be used to change text on button on taskdetails page when task is marked done etc-->
	<!--		<tr th:each="taskTitle : ${taskTitle}">-->
	<!--			<td th:if="${taskTitle.isDone()} == true">Done</td>-->
	<!--			<td th:if="${taskTitle.isDone()} == false">Mark as Done</td>-->
	<!--		</tr>-->


</div>


<div class="container">

	<div class="row row-cols-1 row-cols-md-5 g-3">
		<div th:each="taskTitle, index : ${taskTitle}" class="col-sm-4">
			<span th:switch="${taskTitle.isDone()}">

				<div th:case="true" class="card text-white bg-success mb-3" style="max-width: 18rem;">
					<div class="card-header" th:text="'Day ' + ${taskTitle.getId()}">Day #</div>
					<div class="card-body">
						<h5 class="card-title" th:text="${taskTitle.getTitle()}">Task title</h5>
						<p class="card-text">Some quick example text to build on the card title and make up the bulk of the
							card's content.</p>
						<a href="#" th:href="@{taskdetails/{id}(id=${taskTitle.getId()})}" class="stretched-link"></a>
					</div>
				</div>

				<div th:case="false" class="card text-dark bg-light mb-3" style="max-width: 18rem;">
					<div th:text="${newStatusList[index.getIndex()].getStatusDone()}"> </div>
					<div class="card-header" th:text="'Day ' + ${taskTitle.getId()}">Day #</div>
					<div class="card-body">
						<h5 class="card-title" th:text="${taskTitle.getTitle()}">Task title</h5>
						<p class="card-text">Some quick example text to build on the card title and make up the bulk of the
							card's content.</p>
						<a href="#" th:href="@{taskdetails/{id}(id=${taskTitle.getId()})}" class="stretched-link"></a>
					</div>
				</div>

			</span>
		</div>
	</div>

</div>


</body>
</html>